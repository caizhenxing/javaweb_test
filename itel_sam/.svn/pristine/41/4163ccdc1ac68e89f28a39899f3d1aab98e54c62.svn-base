package com.sun.test;

import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;

import org.springframework.beans.factory.xml.XmlBeanFactory;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
import org.springframework.core.io.ClassPathResource;

import sun.java2d.pipe.SpanShapeRenderer.Simple;

import cn.jpush.api.JPushClient;
import cn.jpush.api.push.PushResult;
import cn.jpush.api.push.model.Platform;
import cn.jpush.api.push.model.PushPayload;
import cn.jpush.api.push.model.audience.Audience;
import cn.jpush.api.push.model.notification.Notification;

import com.itel.tools.JPushUtils;

public class SpringTest {
	
	private static JPushClient client;
	
	public static void sendMsgByPerson(String regId,String msg ){
//		 Builder builder = PushPayload.newBuilder();
		 Audience audience = Audience.registrationId(regId);
//		 builder.setAudience(audience);
		 PushPayload.Builder p = PushPayload.newBuilder();
		 p.setAudience(audience);
		 p.setPlatform(Platform.android());
		 Notification notification = Notification.alert(msg);
		 p.setNotification(notification);
		 PushPayload pp =  p.build();
		 PushResult result = client.sendPush(pp);
		 
		 System.out.println(result.isResultOK());
	}
	
	public static void dateParse(){
		long times = System.currentTimeMillis();
		SimpleDateFormat simpleDateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm");
		try {
//			Date date = simpleDateFormat.parse(times+"");
			Date date = new Date(times);
			System.out.println(simpleDateFormat.format(date));
			date = simpleDateFormat.parse(simpleDateFormat.format(date));
			System.out.println(date.toString());
		} catch (Exception e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}
	
	public static void main(String[] args){
		XmlBeanFactory context=new XmlBeanFactory(new ClassPathResource("applicationContext.xml"));

		JPushUtils jPushUtils=(JPushUtils)context.getBean("jPushUtils");
//		client = jPushUtils.getClient();
//		sendMsgByPerson("0701dccb73b","sendMsgByPerson");
//		jPushUtils.sendMsg("this is Spring FrameWork IOC...");
		dateParse();
	}

}
