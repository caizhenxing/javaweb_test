package com.itel.tools;

import cn.jpush.api.JPushClient;
import cn.jpush.api.push.PushResult;
import cn.jpush.api.push.model.Platform;
import cn.jpush.api.push.model.PushPayload;
import cn.jpush.api.push.model.audience.Audience;
import cn.jpush.api.push.model.notification.Notification;

/**
 * 极光推送公共类
 * 
 * @author Administrator
 * 
 */
public class JPushUtils {
	
	/**
	 * applicationContext.xml注入client,以便通过配置文件修改推送app
	 */
	private JPushClient client;
	 
	 
	public JPushClient getClient() {
		return client;
	}
	public void setClient(JPushClient client) {
		this.client = client;
	}
	
	
	public void sendMsg(String str ){
		PushPayload p = PushPayload.alertAll(str);
		PushResult result = client.sendPush(p);
		
	}
	
	public void sendMsgByPerson(String regId,String msg ){
		 Audience audience = Audience.registrationId(regId);
		 PushPayload.Builder p = PushPayload.newBuilder();
		 p.setAudience(audience);
		 p.setPlatform(Platform.android());
		 Notification notification = Notification.alert(msg);
		 p.setNotification(notification);
		 PushPayload pp =  p.build();
		 PushResult result = client.sendPush(pp);
		 
		 System.out.println(result.isResultOK());
	}
	
	

}
